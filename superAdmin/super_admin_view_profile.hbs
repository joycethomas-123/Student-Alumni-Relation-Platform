<style>
    .cartoon-dialogue {
        display: inline-block;
        background-color: rgb(234, 240, 246);
        padding: 15px;
        border-radius: 40px 0px 40px 40px;
        border: 4px solid rgb(38, 82, 164);
        width: 100%;
        height: auto;
        overflow-y: auto;
        font-family: 'Comic Sans MS', cursive, sans-serif;
        font-size: 15px;
        color: rgb(38, 82, 164);
        margin: auto;
        text-align: center;
        word-wrap: break-word; /* Allow long words to wrap onto the next line */
    }

    .btn{
        background-color: rgb(38, 82, 164);
        color: white;
        font-weight: 700;
        padding: 10px;
        margin: 5px;
        border: none;
        transition: background-color 0.3s ease;
    }
    .btn:hover{
        background-color:rgb(123, 180, 230);
    }

    .noted_note{
        margin-top: 50px;
    }

    .a_button{
        text-decoration: none;
    }


    .profile_view_image{
        display: inline-block;
        width: 500px;
        border-radius: 50%; 
        object-fit: cover;
        height: 500px;
        margin: 20px;
    }

    .message_button_view{
        margin-left: 205px;
    }


    .experience{
        border-radius: 10px;
        width: 100%; 
        border: none;
        box-shadow: 0 0px 4px rgba(87, 85, 85, 0.9); 
        background-color:rgb(234, 240, 246);
        position:relative;
    }

    .btn_domain{
        background-color: rgb(84, 121, 189);
        transition: background-color 0.3s ease;
    }
    .btn_domain:hover{
        background-color: rgb(38, 82, 164);
    }

    .experience_box_div{
        display: inline-block;
        width:100%;
        margin-top:80px;
    }

    .detail_div{
        overflow: auto; 
        word-wrap: break-word;
    }
    .detail_div_head{
        font-weight: 600px;
    }
    .detail_div_text{
        overflow: auto; 
        word-wrap: break-word;
        font-weight: 550;
        color: black;
    }
    .detail_div_text_head{
        color: rgb(30, 61, 120);
    }
    .experience_text_head{
        color: rgb(30, 61, 120);
    }
    .experience_text{
        overflow: auto; 
        word-wrap: break-word;
        font-weight: 550;
        color: black;
    }

    .container-fluid {
        overflow: auto; 
        word-wrap: break-word;
    }
    
    .footed{
        text-align: center;
    }

    @media (max-width: 600px) {
        .profile_view_image {
            max-width: 400px;
            max-height: 400px;
            margin: 10px;
        }
        .message_button_view{
            margin-left: 160px;
        }
    }
     @media (max-width: 480px) {
        .profile_view_image {
            max-width: 315px;
            max-height: 315px;
            margin: auto;
            margin-left: 15px;
        } 
        .message_button_view{
            margin-left: 120px;
        }
        .btn{
            font-weight: 500;
            padding: 8px;
        }  
        .footed{
            font-size: 14px;
        }
    }

    .contain {
        display: flex;
        flex-direction: row;
        margin-bottom: 30px;
    }

    .detail_div{
        display: inline-block;
        margin-left: 170px;
    }

    @media (max-width: 1340px) {
        .contain {
            flex-direction: column;
        } 
        .detail_div{
            margin-left: 35px;
        } 
        .experience_box_div{
            margin-top:60px;
        }
        .cartoon-dialogue{
            margin-top: 20px;
        }
    }

    @media (max-width: 399px) {
        .container-fluid {
            padding-left: 0px;
        }
    }

</style>

<section style="background: linear-gradient(to right, rgb(223, 238, 250), #ffffff); padding-top: 100px;">
    <div class="container-fluid">
        <div class="col-md-12">

            <div class="contain">
                <div  style="display: inline-block;" >
                    <div style="display: block;">
                        <img class="profile_view_image"  id="profileImageAlternate" >
                    </div>
                     <!-- <div class="message_button_view"></div> -->
                </div>
                <div class="detail_div" >
                    <h3 class="card-title mt-3 detail_div_head">{{profile.Name}}</h3>
                    <p class="card-text detail_div_text_head"><strong>Passout Year : </strong><br><span class="detail_div_text">{{profile.passoutYear}}</span></p>
                    <p class="card-text detail_div_text_head"><strong>Contact : </strong><br><span class="detail_div_text">{{profile.Email}}</span></p>
                    <p class="card-text detail_div_text_head"><strong>Current Location : </strong><br><span class="detail_div_text">{{profile.currentLocation}}</span></p>
                    {{#if working}}
                        <p class="card-text detail_div_text_head"><strong>Working at : </strong><br><span class="detail_div_text">{{profile.working.workingCompanyName}}</span></p>
                        <p class="card-text detail_div_text_head"><strong>Joined in : </strong><br><span class="detail_div_text">{{profile.working.workingCompanyJoinedYear}}</span></p>
                    {{/if}}
                    {{#if owns}}
                        <p class="card-text"><strong>Owns : </strong><br><span class="detail_div_text">{{profile.ownCompany.FoundedCompanyName}}</span></p>
                        <p class="card-text"><strong>Founded in : </strong><br><span class="detail_div_text">{{profile.ownCompany.foundedYear}}</span></p>
                    {{/if}}<br><br>

                    <p class="card-title detail_div_text_head mt-3"><strong>Skills/Domains</strong></p>
                    {{#each profile.workDomains}}
                        <button type="button" class="btn btn_domain">{{this}}</button>
                    {{/each}}<br>
                </div>
            </div>


            {{#if profile.Note}}
                <div class="noted_note">
                    {{#if profileCheck}}
                    <a href="/add-note/{{profile._id}}">
                    {{/if}}
                        <div class="cartoon-dialogue">
                            {{#if NoNote}}
                            Hello, add your experiences or memories with CEC!<br>
                            click me to edit or add
                            {{/if}}
                            {{#if checkNote}}
                                {{profile.Note}}
                            {{/if}}
                        </div>
                    {{#if profileCheck}}
                    </a>
                    {{/if}}
                </div>
            {{/if}}
                
            <div class="experience_box_div">
                <p class="card-title" style="font-size: 20px;"><strong>Experiences</strong></p>
                {{#each profile.experience}}
                    <div class="card " style="width: 100%; border:none;">
                        <div class="card-body experience" >
                            <p class="card-text experience_text_head"><strong>Title : </strong><br><span class="experience_text">{{this.companyName}}</span></p><hr>
                            <p class="card-text experience_text_head"><strong>Start date : </strong><br><span class="experience_text">{{this.startMonth}} {{this.startYear}}</span></p><hr>
                            <p class="card-text experience_text_head"><strong>End date : </strong><br><span class="experience_text">{{this.endMonth}} {{this.endYear}}</span></p><hr>
                            <p class="card-text experience_text_head"><strong>Description : </strong><br><span class="experience_text">{{this.description}}</span></p><hr>
                        </div>
                    </div><br>
                {{/each}}
            </div>

        </div>
    </div>
</section>
<footer class="footed">profile ID : {{profile._id}}</footer>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const profileImage = document.getElementById("profileImageAlternate");
        const imageUrl = "/user-images/{{profile._id}}.jpg";
        fetch(imageUrl)
            .then(response => {
                if (response.ok) {
                    profileImage.src = imageUrl; // Use profile image
                } else {
                    profileImage.src = "/user-images/user.png"; // Use default image
                }
            })
            .catch(error => {
                console.error("Error fetching image:", error);
                profileImage.src = "/user-images/user.png"; // Use default image on fetch error
            });
    });
</script>